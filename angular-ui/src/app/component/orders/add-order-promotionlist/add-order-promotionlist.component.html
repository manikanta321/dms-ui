<div class="font">
    <div class="main">
        <div class="containerrr promotionpopup-scroll" >
            <div class="addUser" style="margin-top: -14px;">
                <mat-icon mat-button class="close-icon" [mat-dialog-close]="false">close</mat-icon>
            </div>
            <div class="head-t" >
                <h3 class="addU font">{{actineLabel}} : <b>Promotions</b></h3>
                <div class="row top-bottom">
                    <div class="row text-center"></div>
                </div>

                <!-- <div class="promotion-card">
                    <div class="promoimgs">
                        <div class="col-md-4 img-container" *ngFor="let Item of arrayOfImages;let i=index;">
                            <div (click)="getpromotionlistById($event,Item);">
                                <img class="card1" src="data:image/jpeg;base64,{{Item.imageurl}}"
                                    [ngClass]="{ 'selected': Item.isSelected }" alt="image does not exit">
                            </div>
                        </div>

                    </div>
                </div> -->
                <div class="label-div" >
                    <span class="selected-promotion-label">Selected Promotions</span>
                </div>

                <div *ngFor="let data of griddatapromotions;let i=index" style="width:111%">
                    <div class="row " >
                        <!-- <div class="col-lg-1">
                            <p class="p1Tag">p{{i + 1}}</p>
                        </div> -->
                        <div class="col-lg-11 buysets">
                            <div (click)="buysetsGroups(data)" class="collapsible label-div mt-1" >
                                <div class="row">
                                    <div class="col-md-11" style="height: 28px;">
                                        <p class="label-cls">
                                            <mat-checkbox [(ngModel)]="data.isProductSelected"
                                                [checked]="data.isProductSelected"></mat-checkbox>
                                            {{data.promotionName}}
                                            <span>{{data.promotionTypesName}} </span>
                                        </p>
                                    </div>
                                    <div class="col-md-1">
                                        <img [src]="data.isShowPromos ? 'assets/img/maximize-arrow.png' : 'assets/img/minimize-tag.png'"
                                            class="expand-arrow" alt="add-user-btn">
                                    </div>
                                </div>
                            </div>

                            <div class="content" *ngIf="data.isShowPromos">
                                <!-- 1st promotions -->
                                <div *ngIf="data.promotionTypesId==1">
                                    <div class="buysets text-center">
                                        <h4 class="buysetHead"><b> {{data.promoDetails.buyGroups.length != 0 ? 'BUYSETS'
                                                :''}} </b> </h4>
                                    </div>
                                    <div *ngFor="let promos of data.promoDetails.buyGroups ">
                                        <div class="buyGrp 1">
                                            <!-- headingds for 1st promotions -->
                                            <div class="row label-div">
                                                <div class="col-md-3">
                                                    <span class="buy-grp"> Buy Group {{promos.groupId}}</span>
                                                </div>
                                                <div class="col-md-6" style="text-align: center;">
                                                    <span class="total-itemss">Total Selected Qty :
                                                        {{promos.totalQuantity}} 
                                                        
                                                        <span style="color:#000;" 
                                                            [ngClass]="{ 'txt-error-span': !(promos.isItemValid) && data.showWarningMsg }">(MOQ:{{promos.moq}})
                                                           
                                                        </span>
                                                        <span class="txt-error ms-5"
                                                        *ngIf="!(promos.isItemValid) && data.showWarningMsg">
                                                        Please select full required quantity
                                                        </span>
                                                    </span>
                                                    
                                                </div>


                                            </div>
                                            <!-- tabels for 1st promotions -->
                                            <div class="label-div tableborderss">
                                                <!-- <p>sssssssdfvfghj</p> -->
                                                <table class="Table1">
                                                    <tr>
                                                        <th data-sortable="true"></th>
                                                        <th data-sortable="true"class="align-center">Product Code</th>
                                                        <th data-sortable="true"class="align-center">Product Name</th>
                                                        <th data-sortable="true"class="align-center">Identifiers</th>
                                                        <th data-sortable="true"class="align-center">Registration No</th>
                                                        
                                                        <th data-sortable="true"class="align-center">Unit Price</th>
                                                        <!-- <th data-sortable="true">Qty. in Stock</th> -->
                                                        <!-- <th data-sortable="false">Tax Templete</th> -->
                                                        <th data-sortable="false"class="align-center">Order Qty</th>
                                                        <th data-sortable="false"class="align-center">Order Amount</th>
                                                    </tr>
                                                    <tr class="table-row" *ngFor="let Item of promos.stockitemid">
                                                        <td><input type="checkbox" [checked]="Item.isProductSelected"
                                                                (change)="checkboxChange($event,Item, data)" /></td>
                                                                 <td style="text-align: left;">{{Item.productSKUName}}</td> 
                                                        <td style="text-align: left;">{{Item.stockitemname}}
                                                        </td>
                                                        <td >{{Item.materialcustomidentifier}}</td>
                                                        <td style="text-align: left;">{{Item.registrationNumber}}</td>
                                                        
                                                        <td class="txt-right">{{Item.price}}</td>
                                                        <!-- <td><input type="number" placeholder="Enter" class="quatity-inp"
                                                                [(ngModel)]="Item.stock"></td> -->
                                                        <!-- <td>
                                                            <select class="tax-select" placeholder="select"
                                                                [(ngModel)]="Item.Taxid">
                                                                <option value="" selected hidden>Select tax</option>
                                                                <option *ngFor="let option of taxdropdowndata"
                                                                    [value]="option.taxTemplateId">
                                                                    {{option.taxTemplateName}}
                                                                </option>
                                                            </select>

                                                            <img src="assets/img/doubleTickes-default.svg"
                                                                (click)="doubleClick(promos.stockitemid, Item.Taxid)"
                                                                alt="double-blue-tick">
                                                        </td> -->
                                                        <td><input type="number" placeholder="Enter Qty"
                                                                class="quatity-inp" [(ngModel)]="Item.Quantity"
                                                                (keyup)="quantityChange(data, Item)"></td>
                                                        <td class="txt-right">{{((Item.Quantity ?? 0) * Item.price)|
                                                            number : '1.2-2' }}
                                                        </td>
                                                    </tr>
                                                    <tr class="bottom-table">
                                                        <td colspan="6" class="btm-total"><b>Total </b></td>
                                                        <td class="btm-total txt-right">
                                                            {{promos.totalQuantity ?? 0 }}</td>
                                                        <td class="btm-total txt-right">{{promos.totalAmount ?? 0 | number :
                                                            '1.2-2'}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- set groups -->

                                    <div class="buysets text-center sub-heading">
                                        <h4 class="buysetHead"><b> {{data.promoDetails.getGroups.length != 0 ?
                                                'GETSETS'
                                                :''}} </b> </h4>
                                    </div>
                                    <div *ngFor="let promos of data.promoDetails.getGroups">
                                        <div class="buyGrp 1">
                                            <!-- headingds for 1st promotions -->
                                            <div class="row label-div">
                                                <div class="col-md-3">
                                                    <span class="buy-grp"> Get Group {{promos.groupId}}</span>
                                                </div>
                                                <div class="col-md-6" style="text-align: center;">
                                                    <span class="total-itemss">Total Selected Qty :
                                                        {{promos.totalQuantity}} <span class="ml-1" style="color:#000;"
                                                            [ngClass]="{ 'txt-error-span': promos.totalQuantity != (promos.foc) && data.showWarningMsg }">(FOC
                                                               {{promos.foc  }})</span></span>

                                                               <span class="txt-error"
                                                               *ngIf="promos.totalQuantity != (promos.foc) && data.showWarningMsg">
                                                               Please select full required quantity
                                                               </span>
                                                           
                                                         
                                                           
                                                </div>
                                                <!-- <div class="col-md-6">
                                                    <button class="searchButton" href="#">
                                                        <i class="material-icons">
                                                            search
                                                        </i>
                                                    </button>
                                                    <div class="searchBox d-flex" style=" cursor: pointer">
                                                        <input class="searchInput" style="font-family: 'Gilroy'"
                                                            type="text" name="" placeholder="Type & search for anything"
                                                            (keyup)="onSearchChange($event)">
                                                        <button class="search-btn"
                                                            style="font-family: 'Gilroy'">Search</button>

                                                    </div>
                                                </div> -->

                                            </div>
                                            <!-- tabels for 1st promotions -->
                                            <div class="label-div tableborderss">
                                                <table id="Table1">
                                                    <tr>
                                                        <th></th>
                                                        <th data-sortable="true"class="align-center">Product Code</th>
                                                        <th data-sortable="true"class="align-center">Product Name</th>
                                                        <th data-sortable="true"class="align-center">Identifiers</th>
                                                        <th data-sortable="true"class="align-center">Registration No</th>
                                                        
                                                        <th data-sortable="true"class="align-center">Unit Price</th>
                                                        <!-- <th data-sortable="true">Qty. in Stock</th> -->
                                                        <!-- <th data-sortable="false">Tax Templete</th> -->
                                                        <th data-sortable="false"class="align-center">Order Qty</th>
                                                        <th data-sortable="false"class="align-center">Order Amount</th>
                                                    </tr>
                                                    <tr class="table-row" *ngFor="let Item of promos.stockitemid">
                                                        <td><input type="checkbox" [checked]="Item.isProductSelected"
                                                                (change)="checkboxChange($event,Item, data)"></td>
                                                                <td style="text-align: left;">{{Item.productSKUName}}</td>
                                                            <td style="text-align: left">{{Item.stockitemname}} </td>
                                                            <td>{{Item.materialcustomidentifier}}</td>
                                                            <td style="text-align: left;">{{Item.registrationNumber}}</td>
                                                        
                                                        
                                                        <td class="txt-right">{{Item.price}}</td>
                                                        <!-- <td><input type="number" placeholder="Enter" class="quatity-inp"
                                                                [(ngModel)]="Item.stock"></td> -->
                                                        <!-- <td>
                                                            <select class="tax-select" placeholder="select"
                                                                [(ngModel)]="Item.Taxid">
                                                                <option value="" selected hidden>Select tax</option>
                                                                <option *ngFor="let option of taxdropdowndata"
                                                                    [value]="option.taxTemplateId">
                                                                    {{option.taxTemplateName}}
                                                                </option>
                                                            </select>

                                                            <img src="assets/img/doubleTickes-default.svg"
                                                                alt="double-blue-tick">
                                                        </td> -->
                                                        <td><input type="number" placeholder="Enter Qty"
                                                                class="quatity-inp" [(ngModel)]="Item.Quantity"
                                                                (keyup)="quantityChange(data, Item)"></td>
                                                        <td class="txt-right">{{((Item.price) * (Item.Quantity))| number
                                                            : '1.2-2' }}</td>
                                                    </tr>
                                                    <tr class="bottom-table">

                                                        <td colspan="6" class="btm-total"><b>Total </b></td>
                                                        <td class="btm-total txt-right">
                                                            {{promos.totalQuantity ?? 0 }}</td>
                                                        <td class="btm-total txt-right">{{promos.totalAmount ?? 0 | number :
                                                            '1.2-2'}}</td>
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <!-- 2nd promotions -->
                                <div *ngIf="data.promotionTypesId==2">
                                    <div class="buysets text-center">
                                        <h4 class="buysetHead"><b> {{data.promoDetails.buySets.length != 0 ? 'BUY SETS'
                                                :''}} </b> </h4>
                                    </div>
                                    <div *ngFor="let setItem of data.promoDetails.buySets;let j=index">
                                        <div *ngFor="let promos of setItem.buyGroups">
                                            <div class="buyGrp 1">
                                                <!-- headingds for 1st promotions -->
                                                <div class="row label-div tableborderss" >
                                                    <div class="col-md-3">
                                                        <span class="buy-grp"> Set -{{setItem.groupId}}: Buy Group
                                                            {{promos.set}}</span>
                                                    </div>
                                                    <div class="col-md-6" style="text-align: center;">
                                                        <span class="total-itemss">Total Selected Qty :
                                                            {{promos.totalQuantity}}
                                                            <span style="color:#000;"
                                                                [ngClass]="{ 'txt-error-span': !(promos.isItemValid) && data.showWarningMsg }">(MOQ:{{promos.moq}})</span>
                                                        </span>
 
                                                        <span class="txt-error"
                                                               *ngIf="!(promos.isItemValid) && data.showWarningMsg ">
                                                               Please select full required quantity
                                                               </span> 

                                                       

                                                        <!-- <span class="total-itemss">Total Selected Qty: ({{promos.totalQuantity}})
                                                            (MOQ:{{promos.moq}})</span>-->
                                                      
                                                    </div>
                                                    <!-- <div class="col-md-6">
                                                        <button class="searchButton" href="#">
                                                            <i class="material-icons">
                                                                search
                                                            </i>
                                                        </button>
                                                        <div class="searchBox d-flex" style=" cursor: pointer">
                                                            <input class="searchInput" style="font-family: 'Gilroy'"
                                                                type="text" name=""
                                                                placeholder="Type & search for anything"
                                                                (keyup)="onSearchChange($event)">
                                                            <button class="search-btn"
                                                                style="font-family: 'Gilroy'">Search</button>

                                                        </div>
                                                    </div> -->

                                                </div>
                                                <!-- tabels for 1st promotions -->
                                                <div class="label-div tableborderss" >
                                                    <table id="Table1">
                                                        <tr>
                                                            <th></th>
                                                            <th data-sortable="true" class="align-center">Product Code</th>
                                                            <th data-sortable="true"class="align-center">Product Name</th>
                                                            <th data-sortable="true"class="align-center">Identifiers</th>
                                                            <th data-sortable="true"class="align-center">Registration No</th>
                                                            <th data-sortable="true"class="align-center">Unit Price</th>
                                                            <!-- <th data-sortable="true">Qty. in Stock</th> -->
                                                            <!-- <th data-sortable="false">Tax Templete</th> -->
                                                            <th data-sortable="false"class="align-center">Quantity</th>
                                                            <th data-sortable="false"class="align-center">Order Amount</th>
                                                        </tr>
                                                        <tr class="table-row" *ngFor="let Item of promos.stockitemid">
                                                            <td><input type="checkbox"
                                                                    [checked]="Item.isProductSelected"
                                                                    [disabled]="!promos.isEnable"
                                                                    (change)="checkboxChange($event,Item, data)" /></td>
                                                            <td style="text-align: left;">{{Item.productSKUName}}</td>
                                                            <td style="text-align: left;">{{Item.stockitemname}} </td>
                                                            <td >{{Item.materialcustomidentifier}}</td>
                                                            <td style="text-align: left;">{{Item.registrationNumber}}</td>
                                                            
                                                            <td class="txt-right">{{Item.price}}</td>
                                                            <!-- <td><input type="number" placeholder="Enter"
                                                                    [disabled]="!promos.isEnable" class="quatity-inp"
                                                                    [(ngModel)]="Item.stock"></td> -->
                                                            <!-- <td>
                                                                <select class="tax-select" placeholder="select"
                                                                    [disabled]="!promos.isEnable"
                                                                    [(ngModel)]="Item.Taxid">
                                                                    <option value="" selected hidden>Select tax</option>
                                                                    <option *ngFor="let option of taxdropdowndata"
                                                                        [value]="option.taxTemplateId">
                                                                        {{option.taxTemplateName}}
                                                                    </option>
                                                                </select>

                                                                <img src="assets/img/doubleTickes-default.svg"
                                                                    (click)="doubleClick(promos.stockitemid, Item.Taxid)"
                                                                    alt="double-blue-tick">
                                                            </td> -->
                                                            <td><input type="number" placeholder="Enter Qty"
                                                                    class="quatity-inp" [(ngModel)]="Item.Quantity"
                                                                    [disabled]="!promos.isEnable"
                                                                    (keyup)="quantityChange(data, Item)"></td>
                                                            <td class="txt-right">{{((Item.Quantity ?? 0) * Item.price)|
                                                                number : '1.2-2'
                                                                }}</td>
                                                        </tr>
                                                        <tr class="bottom-table">
                                                            <td colspan="6" class="btm-total"><b>Total </b></td>
                                                            <td class="btm-total txt-right">
                                                                {{promos.totalQuantity ?? 0 }}
                                                            </td>
                                                            <td class="btm-total txt-right">
                                                                {{promos.totalAmount ?? 0 | number : '1.2-2'}}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="line-txt" *ngIf="(j +1) != data.promoDetails.buySets.length">
                                            <span>(OR)</span>
                                        </div>

                                    </div>
                                    <div class="buysets text-center sub-heading">
                                        <h4 class="buysetHead"><b> {{data.promoDetails.getSets.length != 0 ? 'GET SETS'
                                                :''}} </b> </h4>
                                        <!-- <div class="text-error-qty "
                                            *ngIf="data.promoDetails.getGroupsQty || data.promoDetails.buyGroupsQty"
                                            [ngClass]="{ 'txt-error': data.promoDetails.getGroupsQty != data.promoDetails.buyGroupsQty }">
                                            (Total Get Qty {{data.promoDetails.getGroupsQty}}) </div> -->
                                    </div>
                                    <!-- set groups -->
                                    <div *ngFor="let setItem of data.promoDetails.getSets;let j=index">
                                        <div *ngFor="let promos of setItem.getGroups">
                                            <div class="buyGrp 1">
                                                <!-- headingds for 1st promotions -->
                                                <div class="row label-div tableborderss">
                                                    <div class="col-md-3">
                                                        <span class="buy-grp"> Set -{{setItem.groupId}}: Get Group
                                                            {{promos.set}}</span>
                                                    </div>
                                                    <div class="col-md-6" style="text-align: center;">
                                                        <span class="total-itemss">Total Selected Qty :
                                                            ({{promos.totalQuantity}})
                                                            <span class="ml-1" style="color:#000;"
                                                                [ngClass]="{ 'txt-error-span': promos.totalQuantity != (promos.foc) && data.showWarningMsg && promos.isEnable }">(FOC
                                                                {{promos.foc}})</span></span>

                                                                

                                                               <span class="txt-error"
                                                               *ngIf="!(promos.totalQuantity) && data.showWarningMsg ">
                                                               Please select full required quantity
                                                               </span>

                                                               
                                                    </div>
                                                    <!-- <div class="col-md-6">
                                                        <button class="searchButton" href="#">
                                                            <i class="material-icons">
                                                                search
                                                            </i>
                                                        </button>
                                                        <div class="searchBox d-flex" style=" cursor: pointer">
                                                            <input class="searchInput" style="font-family: 'Gilroy'"
                                                                type="text" name=""
                                                                placeholder="Type & search for anything"
                                                                (keyup)="onSearchChange($event)">
                                                            <button class="search-btn"
                                                                style="font-family: 'Gilroy'">Search</button>

                                                        </div>
                                                    </div> -->

                                                </div>
                                                <!-- tabels for 1st promotions -->
                                                <div class="label-div tableborderss">
                                                    <table id="Table1">
                                                        <tr>
                                                            <th></th>
                                                            <th data-sortable="true"class="align-center">Product Code</th>
                                                            <th data-sortable="true"class="align-center">Product Name</th>
                                                            <th data-sortable="true"class="align-center">Identifiers</th>
                                                            <th data-sortable="true"class="align-center">Registraion No</th>
                                                            
                                                            <th data-sortable="true"class="align-center">Unit Price</th>
                                                            <!-- <th data-sortable="true">Qty. in Stock</th> -->
                                                            <!-- <th data-sortable="false">Tax Templete</th> -->
                                                            <th data-sortable="false"class="align-center"> Order Qty</th>
                                                            <th data-sortable="false"class="align-center">Order Amount</th>
                                                        </tr>
                                                        <tr class="table-row" *ngFor="let Item of promos.stockitemid">
                                                            <td><input type="checkbox" [disabled]="!promos.isEnable"
                                                                    [checked]="Item.isProductSelected"
                                                                    (change)="checkboxChange($event,Item, data)"></td>
                                                            <td style="text-align: left;">{{Item.productSKUName}}</td>
                                                            <td style="text-align: left;">{{Item.stockitemname}} </td>
                                                            <td >{{Item.materialcustomidentifier}}</td>
                                                            <td style="text-align: left;">{{Item.registrationNumber}}</td>

                                                            <td class="txt-right">{{Item.price}}</td>
                                                            <!-- <td><input type="number" placeholder="Enter"
                                                                    [disabled]="!promos.isEnable" class="quatity-inp"
                                                                    [(ngModel)]="Item.stock"></td> -->
                                                            <!-- <td>
                                                                <select class="tax-select" placeholder="select"
                                                                    [disabled]="!promos.isEnable"
                                                                    [(ngModel)]="Item.Taxid">
                                                                    <option value="" selected hidden>Select tax</option>
                                                                    <option *ngFor="let option of taxdropdowndata"
                                                                        [value]="option.taxTemplateId">
                                                                        {{option.taxTemplateName}}
                                                                    </option>
                                                                </select>

                                                                <img src="assets/img/doubleTickes-default.svg"
                                                                    (click)="doubleClick(promos.stockitemid, Item.Taxid)"
                                                                    alt="double-blue-tick">
                                                            </td> -->
                                                            <td><input type="number" placeholder="Enter Qty"
                                                                    class="quatity-inp" [disabled]="!promos.isEnable"
                                                                    [(ngModel)]="Item.Quantity"
                                                                    (keyup)="quantityChange(data, Item)"></td>
                                                            <td class="txt-right">{{((Item.Quantity ?? 0) * Item.price)|
                                                                number : '1.2-2'
                                                                }}</td>
                                                        </tr>
                                                        <tr class="bottom-table">
                                                            <td colspan="6" class="btm-total"><b>Total </b></td>
                                                            <td class="btm-total txt-right">
                                                             {{promos.totalQuantity ?? 0}}
                                                            </td>
                                                            <td class="btm-total txt-right">
                                                                {{promos.totalAmount ?? 0 | number : '1.2-2'}}
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="line-txt" *ngIf="(j +1) != data.promoDetails.getSets.length">
                                            <span>(OR)</span>
                                        </div>

                                    </div>
                                </div>

                                <!-- 3rd promotions -->
                                <div *ngIf="data.promotionTypesId==3">
                                    <div>
                                        <div class="buyGrp 1">
                                            <!-- headingds for 3rd promotions  tableborderss -->
                                            <div class="row label-div ">
                                                <div class="col-md-3">
                                                    <span class="buy-grp"> Buy Group</span>
                                                </div>
                                                <div class="col-md-9" style="text-align: left;">

                                                    <span class="total-itemss">Total Selected Qty:
                                                        {{data.promoDetails.totalQuantity}}
                                                        <span style="color:#000;"
                                                            [ngClass]="{ 'txt-error-span': ((!data.promoDetails.isItemValid || !data.promoDetails.isDiscountItemValid))   && data.showWarningMsg }">(MOQ:{{data.promoDetails.moq}})</span>
                                                        <span style="color:#000;"> Discount percentage:
                                                            {{data.promoDetails.DiscountPercentage}}</span>
                                                    </span>
                                                    <span class="txt-error"
                                                    *ngIf="!(data.promoDetails.isItemValid) && data.showWarningMsg">
                                                    Please select full required quantity
                                                    
                                                    </span> 

                                                </div>
                                                <!-- <div class="col-md-6">
                                                    <button class="searchButton" href="#">
                                                        <i class="material-icons">
                                                            search
                                                        </i>
                                                    </button>
                                                    <div class="searchBox d-flex" style=" cursor: pointer">
                                                        <input class="searchInput" style="font-family: 'Gilroy'"
                                                            type="text" name="" placeholder="Type & search for anything"
                                                            (keyup)="onSearchChange($event)">
                                                        <button class="search-btn"
                                                            style="font-family: 'Gilroy'">Search</button>

                                                    </div>
                                                </div> -->

                                            </div>
                                            <!-- tabels for 3rd promotions -->
                                            <div class="label-div tableborderss">
                                                <table id="Table1">
                                                    <tr>
                                                        <th></th>
                                                        <th data-sortable="true"class="align-center">Product Code</th>
                                                        <th data-sortable="true"class="align-center">Product Name</th>

                                                        <th data-sortable="true"class="align-center">Identifiers</th>
                                                        <th data-sortable="true"class="align-center">Registraion No</th>
                                                        
                                                        <th data-sortable="true"class="align-center">Unit Price</th>


                                                        <!-- <th data-sortable="true">SKU</th> -->
                                                        <!-- <th data-sortable="true">Price</th> -->
                                                        <!-- <th data-sortable="true">Qty. in Stock</th>
                                                        <th data-sortable="false">Tax Templete</th> -->

                                                        

                                                        <th data-sortable="false"class="align-center"> Order Qty</th>
                                                        <th data-sortable="false"class="align-center">Final Price</th>
                                                        <th data-sortable="false"class="align-center">Order Amount</th>
                                                    </tr>
                                                    <tr class="table-row"
                                                        *ngFor="let Item of data.promoDetails.stockitems">
                                                        <td><input type="checkbox" [checked]="Item.isProductSelected"
                                                                (change)="checkboxChange($event,Item, data)"></td>
                                                                <td style="text-align: left;">{{Item.productSKUName}}</td>
                                                           <td style="text-align: left;">{{Item.stockitemname}} </td>
                                                           <td >{{Item.materialcustomidentifier}}</td>
                                                            <td style="text-align: left;">{{Item.registrationNumber}}</td>
                                                        <td class="txt-right">{{Item.price}}</td>
                                                        <!-- <td><input type="number" placeholder="Enter" class="quatity-inp"
                                                                [(ngModel)]="Item.stock"></td> -->
                                                        <!-- <td>
                                                            <select class="tax-select" placeholder="select"
                                                                [(ngModel)]="Item.Taxid">
                                                                <option value="" selected hidden>Select tax</option>
                                                                <option *ngFor="let option of taxdropdowndata"
                                                                    [value]="option.taxTemplateId">
                                                                    {{option.taxTemplateName}}
                                                                </option>
                                                            </select>

                                                            <img src="assets/img/doubleTickes-default.svg"
                                                                class="double-tick"
                                                                (click)="doubleClick(data.promoDetails.stockitems, Item.Taxid)"
                                                                alt="double-blue-tick">
                                                        </td> -->
                                                        <td><input type="number" placeholder="Enter Qty"
                                                                class="quatity-inp" [(ngModel)]="Item.Quantity"
                                                                (keyup)="quantityChange(data, Item)"></td>
                                                        <td class="txt-right"> {{(Item.finalPrice) | number : '1.2-2'}}
                                                        </td>
                                                        <td class="txt-right">{{Item.DiscountAmount ?? 0 |
                                                            currency:'':''}}</td>
                                                    </tr>
                                                    <tr class="bottom-table">
                                                        <td colspan="6" class="btm-total"><b>Total </b></td>
                                                        <td class="btm-total txt-right"> {{data.promoDetails.totalQuantity ?? 0 }}
                                                        </td>
                                                        <td class="btm-total">
                                                        </td>
                                                        <td class="txt-right">{{data.promoDetails.DiscountAmount ?? 0 | number : '1.2-2'}}
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                                <!-- 4th promotions -->
                                <div *ngIf="data.promotionTypesId==4">

                                    <div>
                                        <div class="buyGrp 1">
                                            <!-- headingds for 4th promotions -->
                                            <div class="row label-div tableborderss" >
                                                <div class="col-md-3">
                                                    <span class="buy-grp"> Buy Group</span>
                                                </div>
                                                <div class="col-md-6" style="text-align: center;">

                                                    <span class="total-itemss">Total Selected Qty:
                                                        {{data.promoDetails.totalQuantity}}
                                                        <span style="color:#000;"
                                                            [ngClass]="{ 'txt-error-span': ((!data.promoDetails.isItemValid || !data.promoDetails.isDiscountItemValid))   && data.showWarningMsg }">(MOQ:{{data.promoDetails.moq}})</span>
                                                    </span>

                                                    <!-- <span class="total-itemss">(MOQ:{{data.promoDetails.moq}})</span>-->
                                                    <span class="txt-error"
                                                        *ngIf="!(data.promoDetails.isItemValid) && data.showWarningMsg">
                                                        Please select full required quantity
                                                        
                                                        </span> 
                                                </div>
                                                <!-- <div class="col-md-6">
                                                    <button class="searchButton" href="#">
                                                        <i class="material-icons">
                                                            search
                                                        </i>
                                                    </button>
                                                    <div class="searchBox d-flex" style=" cursor: pointer">
                                                        <input class="searchInput" style="font-family: 'Gilroy'"
                                                            type="text" name="" placeholder="Type & search for anything"
                                                            (keyup)="onSearchChange($event)">
                                                        <button class="search-btn"
                                                            style="font-family: 'Gilroy'">Search</button>

                                                    </div>
                                                </div> -->

                                            </div>
                                            <!-- tabels for 4th promotions -->
                                            <div class="label-div tableborderss">
                                                <table id="Table1">
                                                    <tr>
                                                        <th></th>
                                                        <th data-sortable="true"class="align-center">Product Code</th>
                                                        <th data-sortable="true"class="align-center">Product Name</th>
                                                        <th data-sortable="true"class="align-center">Identifiers</th>
                                                        <th data-sortable="true"class="align-center">Registration No</th>
                                                       
                                                        <th data-sortable="true"class="align-center">Unit Price</th>
                                                        <!-- <th data-sortable="true">Qty. in Stock</th>
                                                        <th data-sortable="false">Tax Templete</th> -->
                                                        <th data-sortable="false"class="align-center">Order Qty</th>
                                                        <th data-sortable="false"class="align-center">Final Price</th>
                                                        <th data-sortable="false"class="align-center">Order Amount</th>
                                                    </tr>
                                                    <tr class="table-row"
                                                        *ngFor="let Item of data.promoDetails.stockitems">
                                                        <td><input type="checkbox" [checked]="Item.isProductSelected"
                                                                (change)="checkboxChange($event,Item, data)"></td>
                                                                <td style="text-align: left;">{{Item.productSKUName}}</td>
                                                        <td style="text-align: left;">{{Item.stockitemname}}
                                                        </td>
                                                        <td >{{Item.materialcustomidentifier}}</td>
                                                        <td style="text-align: left;">{{Item.registrationNumber}}</td>
                                                        
                                                        
                                                        <td class="txt-right">{{Item.price}}</td>
                                                        <!-- <td><input type="number" placeholder="Enter" class="quatity-inp"
                                                                [(ngModel)]="Item.stock"></td> -->
                                                        <!-- <td>
                                                            <select class="tax-select" placeholder="select"
                                                                [(ngModel)]="Item.Taxid">
                                                                <option value="" selected hidden>Select tax</option>
                                                                <option *ngFor="let option of taxdropdowndata"
                                                                    [value]="option.taxTemplateId">
                                                                    {{option.taxTemplateName}}
                                                                </option>
                                                            </select>

                                                            <img src="assets/img/doubleTickes-default.svg"
                                                                class="double-tick"
                                                                (click)="doubleClick(data.promoDetails.stockitems, Item.Taxid)"
                                                                alt="double-blue-tick">

                                                        </td> -->
                                                        <td><input type="number" placeholder="Enter Qty"
                                                                class="quatity-inp" [(ngModel)]="Item.Quantity"
                                                                (keyup)="quantityChange(data, Item)"></td>

                                                        <td class="txt-right">{{Item.DiscountAmount ?? 0 | number :
                                                            '1.2-2'}}</td>
                                                        <td class="txt-right">{{(Item.finalPrice) | number : '1.2-2'}}
                                                        </td>
                                                    </tr>
                                                    <tr class="bottom-table">
                                                        <td colspan="6" class="btm-total"><b>Total </b></td>

                                                        <td class="btm-total txt-right">
                                                            {{data.promoDetails.totalQuantity ??
                                                            0 }}
                                                        </td>
                                                        <td class="btm-total"></td>

                                                        <td class="txt-right">{{data.promoDetails.DiscountAmount ?? 0 | number : '1.2-2'}}
                                                        </td>
                                                        
                                                    </tr>
                                                </table>
                                            </div>
                                        </div>
                                    </div>

                                </div>

                            </div>


                        </div>
                    </div>
                </div>
            </div>

        </div>
       
            <button type="button" class="saveas-draft1" [disabled]="!isOrderPromotionValid" (click)="addPromoItems()">Add
                items</button>
         

       
    </div>
</div>